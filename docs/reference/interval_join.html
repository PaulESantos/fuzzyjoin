<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Join two tables based on overlapping (low, high) intervals — interval_join • fuzzyjoin</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Join two tables based on overlapping (low, high) intervals — interval_join" />
<meta property="og:description" content="Joins tables based on overlapping intervals: for example, joining
the row (1, 4) with (3, 6), but not with (5, 10). This operation is sped up
using interval trees as implemented in the IRanges package. You
can specify particular relationships between intervals (such as a maximum gap,
or a minimum overlap) through arguments passed on to
findOverlaps. See that documentation for descriptions
of such arguments." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">fuzzyjoin</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/stringdist_join.html">Example of `stringdist_inner_join`: Correcting misspellings against a dictionary</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/dgrtwo/fuzzyjoin/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Join two tables based on overlapping (low, high) intervals</h1>
    <small class="dont-index">Source: <a href='https://github.com/dgrtwo/fuzzyjoin/blob/master/R/interval_join.R'><code>R/interval_join.R</code></a></small>
    <div class="hidden name"><code>interval_join.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Joins tables based on overlapping intervals: for example, joining
the row (1, 4) with (3, 6), but not with (5, 10). This operation is sped up
using interval trees as implemented in the IRanges package. You
can specify particular relationships between intervals (such as a maximum gap,
or a minimum overlap) through arguments passed on to
<code><a href='https://rdrr.io/pkg/IRanges/man/findOverlaps-methods.html'>findOverlaps</a></code>. See that documentation for descriptions
of such arguments.</p>
    </div>

    <pre class="usage"><span class='fu'>interval_join</span>(<span class='no'>x</span>, <span class='no'>y</span>, <span class='no'>by</span>, <span class='kw'>mode</span> <span class='kw'>=</span> <span class='st'>"inner"</span>, <span class='no'>...</span>)

<span class='fu'>interval_inner_join</span>(<span class='no'>x</span>, <span class='no'>y</span>, <span class='kw'>by</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='no'>...</span>)

<span class='fu'>interval_left_join</span>(<span class='no'>x</span>, <span class='no'>y</span>, <span class='kw'>by</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='no'>...</span>)

<span class='fu'>interval_right_join</span>(<span class='no'>x</span>, <span class='no'>y</span>, <span class='kw'>by</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='no'>...</span>)

<span class='fu'>interval_full_join</span>(<span class='no'>x</span>, <span class='no'>y</span>, <span class='kw'>by</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='no'>...</span>)

<span class='fu'>interval_semi_join</span>(<span class='no'>x</span>, <span class='no'>y</span>, <span class='kw'>by</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='no'>...</span>)

<span class='fu'>interval_anti_join</span>(<span class='no'>x</span>, <span class='no'>y</span>, <span class='kw'>by</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='no'>...</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>A tbl</p></td>
    </tr>
    <tr>
      <th>y</th>
      <td><p>A tbl</p></td>
    </tr>
    <tr>
      <th>by</th>
      <td><p>Columns by which to join the two tables. If provided, this must be
two columns: start of interval, then end of interval</p></td>
    </tr>
    <tr>
      <th>mode</th>
      <td><p>One of "inner", "left", "right", "full" "semi", or "anti"</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Extra arguments passed on to <code><a href='https://rdrr.io/pkg/IRanges/man/findOverlaps-methods.html'>findOverlaps</a></code></p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This allows joining on date or datetime intervals. It throws an
error if the type of date/datetime disagrees between the two tables.</p>
<p>This requires the IRanges package from Bioconductor. See here for installation:
<a href='https://bioconductor.org/packages/release/bioc/html/IRanges.html'>https://bioconductor.org/packages/release/bioc/html/IRanges.html</a>.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='kw'>if</span> (<span class='fu'><a href='https://rdrr.io/r/base/ns-load.html'>requireNamespace</a></span>(<span class='st'>"IRanges"</span>, <span class='kw'>quietly</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)) {
  <span class='no'>x1</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span>(<span class='kw'>id1</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fl'>3</span>, <span class='kw'>start</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>1</span>, <span class='fl'>5</span>, <span class='fl'>10</span>), <span class='kw'>end</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>3</span>, <span class='fl'>7</span>, <span class='fl'>15</span>))
  <span class='no'>x2</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span>(<span class='kw'>id2</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fl'>3</span>, <span class='kw'>start</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>2</span>, <span class='fl'>4</span>, <span class='fl'>16</span>), <span class='kw'>end</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>4</span>, <span class='fl'>8</span>, <span class='fl'>20</span>))

  <span class='fu'>interval_inner_join</span>(<span class='no'>x1</span>, <span class='no'>x2</span>)

  <span class='co'># Allow them to be separated by a gap with a maximum:</span>
  <span class='fu'>interval_inner_join</span>(<span class='no'>x1</span>, <span class='no'>x2</span>, <span class='kw'>maxgap</span> <span class='kw'>=</span> <span class='fl'>1</span>)   <span class='co'># let 1 join with 2</span>
  <span class='fu'>interval_inner_join</span>(<span class='no'>x1</span>, <span class='no'>x2</span>, <span class='kw'>maxgap</span> <span class='kw'>=</span> <span class='fl'>20</span>)  <span class='co'># everything joins each other</span>

  <span class='co'># Require that they overlap by more than a particular amount</span>
  <span class='fu'>interval_inner_join</span>(<span class='no'>x1</span>, <span class='no'>x2</span>, <span class='kw'>minoverlap</span> <span class='kw'>=</span> <span class='fl'>3</span>)

  <span class='co'># other types of joins:</span>
  <span class='fu'>interval_full_join</span>(<span class='no'>x1</span>, <span class='no'>x2</span>)
  <span class='fu'>interval_left_join</span>(<span class='no'>x1</span>, <span class='no'>x2</span>)
  <span class='fu'>interval_right_join</span>(<span class='no'>x1</span>, <span class='no'>x2</span>)
  <span class='fu'>interval_semi_join</span>(<span class='no'>x1</span>, <span class='no'>x2</span>)
  <span class='fu'>interval_anti_join</span>(<span class='no'>x1</span>, <span class='no'>x2</span>)
}</div><div class='output co'>#&gt; <span class='message'>Joining by: c("start", "end")</span></div><div class='output co'>#&gt; <span class='message'>Joining by: c("start", "end")</span></div><div class='output co'>#&gt; <span class='message'>Joining by: c("start", "end")</span></div><div class='output co'>#&gt; <span class='message'>Joining by: c("start", "end")</span></div><div class='output co'>#&gt; <span class='message'>Joining by: c("start", "end")</span></div><div class='output co'>#&gt; <span class='message'>Joining by: c("start", "end")</span></div><div class='output co'>#&gt; <span class='message'>Joining by: c("start", "end")</span></div><div class='output co'>#&gt; <span class='message'>Joining by: c("start", "end")</span></div><div class='output co'>#&gt; <span class='message'>Joining by: c("start", "end")</span></div><div class='output co'>#&gt;   id1 start end
#&gt; 3   3    10  15</div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by David Robinson.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


